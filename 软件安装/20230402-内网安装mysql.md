# 内网安装mysql

# 环境信息

- 内网机器，没有联网
- 安装mysql
- mysql压缩包安装
- windows机器

# 前置准备

- 提前下载好mysql压缩包

# 操作步骤

- 将压缩包拷贝到内网机器上。
- 解压mysql压缩包
- 进入解压文件夹下，新建my.ini文件，文件内容如下：

```
[client]
port=3306
default-character-set=utf8
[mysqld]
# 设置为自己MYSQL的安装目录
basedir=D:\mysql5.7\
# 设置为MYSQL的数据目录
datadir=D:\mysql5.7\data\
port=3306
character_set_server=utf8
# 跳过安全检查
skip-grant-tables
```

- 在cmd当中打开当前文件夹，执行安装命令，执行`mysqld --install `
- 在bin目录下执行初始化数据库操作，执行命令`mysqld --initialze-secure --user=root`，执行截图如下，执行成功可以在文件夹看到data目录
- 启动mysql服务，打开任务管理器，找到mysql服务，选择启动即可。
- 进入cmd，进入mysql，执行`mysql -uroot -p`，回车进入mysql，执行

```
use mysql;  
update user set authentication_string=password('xdr') where user='root' and Host='localhost';
```

- 执行`flush privileges;`刷新权限，执行退出`quit`
- 修改my.ini文件，注释掉以下命令，

```
# skip-grant-tables
```

- 重启mysql服务，执行
  - 停止服务`net stop mysql`
  - 启动服务`net start mysql`
- 